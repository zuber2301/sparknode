                                Table "public.departments"
       Column       |           Type           | Collation | Nullable |      Default       
--------------------+--------------------------+-----------+----------+--------------------
 id                 | uuid                     |           | not null | uuid_generate_v4()
 tenant_id          | uuid                     |           | not null | 
 name               | character varying(255)   |           | not null | 
 parent_id          | uuid                     |           |          | 
 created_at         | timestamp with time zone |           |          | now()
 updated_at         | timestamp with time zone |           |          | now()
 budget_balance     | numeric(15,2)            |           | not null | 0
 allocated_budget   | numeric(15,2)            |           |          | 0
 distributed_budget | numeric(15,2)            |           |          | 0
Indexes:
    "departments_pkey" PRIMARY KEY, btree (id)
    "departments_tenant_id_name_key" UNIQUE CONSTRAINT, btree (tenant_id, name)
Foreign-key constraints:
    "departments_parent_id_fkey" FOREIGN KEY (parent_id) REFERENCES departments(id)
    "departments_tenant_id_fkey" FOREIGN KEY (tenant_id) REFERENCES tenants(id) ON DELETE CASCADE
Referenced by:
    TABLE "budget_logs" CONSTRAINT "budget_logs_from_dept_id_fkey" FOREIGN KEY (from_dept_id) REFERENCES departments(id) ON DELETE SET NULL
    TABLE "budget_logs" CONSTRAINT "budget_logs_to_dept_id_fkey" FOREIGN KEY (to_dept_id) REFERENCES departments(id) ON DELETE SET NULL
    TABLE "department_budget_allocations" CONSTRAINT "department_budget_allocations_department_id_fkey" FOREIGN KEY (department_id) REFERENCES departments(id) ON DELETE CASCADE
    TABLE "department_budgets" CONSTRAINT "department_budgets_department_id_fkey" FOREIGN KEY (department_id) REFERENCES departments(id) ON DELETE CASCADE
    TABLE "departments" CONSTRAINT "departments_parent_id_fkey" FOREIGN KEY (parent_id) REFERENCES departments(id)
    TABLE "users" CONSTRAINT "users_department_id_fkey" FOREIGN KEY (department_id) REFERENCES departments(id)
Policies:
    POLICY "tenant_isolation_departments"
      USING (((tenant_id = (current_setting('app.tenant_id'::text))::uuid) OR (current_setting('app.is_platform_admin'::text, false) = 'true'::text)))

